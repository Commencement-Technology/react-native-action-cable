var Connection,Consumer,Subscription,Subscriptions;Connection=require("./connection"),Subscriptions=require("./subscriptions"),Subscription=require("./subscription"),Consumer=class{constructor(n,i,t){this.send=this.send.bind(this),this.connect=this.connect.bind(this),this.disconnect=this.disconnect.bind(this),this.ensureActiveConnection=this.ensureActiveConnection.bind(this),this.url=n,this.log=i,this.WebSocket=t,this.subscriptions=new Subscriptions(this),this.connection=new Connection(this,this.log,this.WebSocket)}send(n){return this.connection.send(n)}connect(){return this.connection.open()}disconnect(){return this.connection.close({allowReconnect:!1})}ensureActiveConnection(){if(!this.connection.isActive())return this.connection.open()}},module.exports=Consumer;